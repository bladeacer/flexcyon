// The code snippets in this file are derived from the Halcyon theme
// - https://github.com/dbarenholz/halcyon-obsidian?tab=readme-ov-file

body {
  --icon-xs: 12.25px;
  --dimmed: 0.55;
  --upsize: 103%;
  --expand: 110%;
  --less-letter-spacing: -3px;
  --flexcyon-tree-item-horiz-padding: 10px;
  --flexcyon-tree-item-verti-padding: 2px;
  --icon-stroke: 2px;
  --icon-color-active: var(--interactive-accent);
  --icon-color-focused: var(--interactive-accent);
  --clickable-icon-radius: 0;

  .clickable-icon {
    padding: 4px 8px;
    opacity: var(--dimmed);

    &:hover {
      opacity: unset;
      scale: var(--upsize);
    }
  }

  .nav-buttons-container {
    gap: 1px;
  }

  &.is-mobile .view-actions {
    justify-content: center;
  }

  .view-header-nav-buttons .clickable-icon,
  .view-actions .clickable-icon {
    padding: 5px 10px;
  }

  .modal-title {
    padding-block-end: 16px;
  }

  .graph-controls .clickable-icon,
  .clickable-icon.side-dock-ribbon-action {
    padding: var(--size-2-2) var(--size-2-3);
  }

  .LazyLoad.is-visible {
    block-size: unset !important;
  }

  .oz-folder-line,
  .oz-nav-file,
  .tree-item:not(.graph-control-section) {
    padding: var(--flexcyon-tree-item-verti-padding)
      var(--flexcyon-tree-item-horiz-padding);
  }

  .text-snippets-class > * {
    inline-size: min(50em, 50vw);
  }

  .text-snippets-class > * > textarea {
    inline-size: min(30em, 35vw);
    margin-block: 16px;
  }

  [aria-label^="Collapse results"] {
    letter-spacing: var(--less-letter-spacing);
  }

  span.flair.mod-pop {
    margin-inline-start: var(--flexcyon-settings-installed-tooltip-left-margin);
  }
}

.is-phone .setting-item-control input {
  inline-size: max-content;
}

body.is-mobile {
  div.setting-item {
    flex-direction: column;
    align-items: unset;

    .setting-item-control {
      align-items: unset;
      justify-content: unset;
    }
  }

  .text-snippets-class > * {
    inline-size: 50%;
    block-size: max-content;
  }

  .text-snippets-class > * > textarea {
    inline-size: 50%;
    block-size: 100px;
  }
}

@mixin nth-hover-color($color-map: ()) {
  $max-index: 0;

  @each $index, $color in $color-map {
    $max-index: max($max-index, $index);
  }

  $interval: $max-index + 1;

  @each $index, $color in $color-map {
    & :nth-of-type(#{$interval}n + #{$index}):hover {
      color: var(--color-#{$color});
    }
  }
}

body.flexcyon-flex-max-mode div.side-dock-actions,
body.flexcyon-sidedock-icon-effects div.side-dock-actions {
  opacity: var(--dimmed);
  scale: var(--upsize);

  &:hover {
    opacity: 1;
  }

  & :hover {
    scale: var(--expand);
  }

  @include nth-hover-color(
    (
      0: purple,
      1: cyan,
      2: blue,
      3: pink,
      4: green,
      5: yellow,
      6: orange,
      7: red,
    )
  );
}

body.flexcyon-flex-max-mode,
body.flexcyon-settings-coloured-icons {
  [aria-label^="Uninstall"] {
    color: rgb(var(--color-red-rgb), 0.9);
  }

  [aria-label^="Options"] {
    color: rgb(var(--color-blue-rgb), 0.9);
  }

  [aria-label^="Customise this command"],
  [aria-label^="Customize this command"],
  [aria-label^="Hotkeys"],
  [aria-label^="Open snippets folder"],
  [aria-label^="Open plugins folder"] {
    color: rgb(var(--color-green-rgb), 0.9);
  }

  [aria-label^="Donate to support"] {
    color: rgb(var(--color-pink-rgb), 0.9);
  }

  [aria-label^="Reload plugins"],
  [aria-label^="Reload snippets"] {
    color: rgb(var(--color-cyan-rgb), 0.9);
  }

  [aria-label^="Restore default"] {
    color: rgb(var(--color-purple-rgb), 0.9);
  }
}

body.is-mobile .vertical-tab-content {
  background-color: var(--color-base-05);
}

body.flexcyon-workspace-angled-layout {
  .collapse-icon.is-collapsed svg.svg-icon {
    transform: rotate(calc(var(--direction) * -1 * 90deg)) skewX(-5deg);
  }

  .tree-item-self .collapse-icon svg {
    transform: skewX(7.5deg);
  }
}

@mixin ascii-aria-icon($aria-label, $content) {
  [aria-label*="#{$aria-label}"] {
    inline-size: 24px;

    &::after {
      font-size: var(--font-ui-small);
      letter-spacing: -0.75px;
      content: "#{$content}";
    }

    svg {
      opacity: 0;
    }
  }
}

body.flexcyon-ascii-icon-set:not(.flexcyon-ensure-plugin-icon),
body.flexcyon-ascii-icon-set.flexcyon-ensure-plugin-icon:not(
    [class*="iconic"]
  ) {
  .modal-close-button {
    position: absolute;
    inset-block-start: 16px;
    inset-inline-end: 2.5%;
    inline-size: 24px;
    padding-inline-end: 48px;

    &::before {
      opacity: 0;
    }

    &::after {
      font-size: var(--font-ui-small);
      content: "x_x";
    }
  }

  .search-input-container {
    &::before {
      opacity: 0;
    }

    &::after {
      position: absolute;
      inset-block-end: 6px;
      inset-inline-start: 0;
      margin: 0 8px;
      font-size: var(--font-ui-small);
      content: "?/";
    }
  }

  .modal.mod-settings .vertical-tab-content {
    padding-block-start: 48px;
  }

  .iconic-add,
  .iconic-drag,
  .iconic-rule-icon,
  .omnisearch-result__icon,
  .workspace-tab-header-inner-close-button,
  .workspace-left-content[aria-label*="Back"] {
    svg {
      opacity: 0;
    }
  }

  .iconic-rule-icon,
  .iconic-add,
  .iconic-drag,
  .workspace-left-content[aria-label*="Back"] {
    inline-size: 24px;
  }

  .iconic-rule-icon::after {
    font-size: var(--font-ui-small);
    letter-spacing: -0.75px;
    content: "./^";
  }

  .iconic-add::after {
    font-size: var(--font-ui-small);
    color: var(--color-green);
    letter-spacing: -0.75px;
    content: "[~]";
    transform: translateX(-24px);
  }

  .iconic-drag::after {
    font-size: var(--font-ui-small);
    letter-spacing: -0.75px;
    content: "|||";
  }

  .omnisearch-result__icon {
    &:has(.lucide-file)::before {
      font-size: var(--font-ui-smaller);
      letter-spacing: -2px;
      content: "''";
    }

    &:has(.lucide-file-text)::before {
      font-size: var(--font-ui-smaller);
      letter-spacing: -2px;
      content: "``";
    }
  }

  .workspace-left-content[aria-label*="Back"] {
    &::after {
      font-size: var(--font-ui-small);
      letter-spacing: -0.75px;
      content: "<";
    }
  }

  .workspace-tab-header-inner-close-button {
    color: inherit;

    &::after {
      font-size: var(--font-ui-small);
      content: "x_x";
    }
  }

  @include ascii-aria-icon("Uninstall", "*_*");
  @include ascii-aria-icon("Options", "[*]");
  @include ascii-aria-icon("Hotkeys", "[%]");
  @include ascii-aria-icon("Customise this command", "[~]");
  @include ascii-aria-icon("Customize this command", "[~]");
  @include ascii-aria-icon("Export settings", ".>");
  @include ascii-aria-icon("Donate", "<3");
  @include ascii-aria-icon("Reload", "[R]");
  @include ascii-aria-icon("Change sort order", "|'|");
  @include ascii-aria-icon("folder", "./^");
  @include ascii-aria-icon("Restore default", "[0]");
  @include ascii-aria-icon("Reset all settings to default", "[0]");
  @include ascii-aria-icon("New note", "[N]");
  @include ascii-aria-icon("Expand", "[+]");
  @include ascii-aria-icon("Collapse", "[-]");
  @include ascii-aria-icon("Auto-reveal current file", "[>]");
  @include ascii-aria-icon("Auto-scroll to current section", "[>]");
  @include ascii-aria-icon("Show search filter", "?/");
  @include ascii-aria-icon("Bookmark the active tab", "[B]");
  @include ascii-aria-icon("New bookmark group", "{+}");

  [aria-label*="New bookmark group"]::after,
  [aria-label*="Collapse"]::after,
  [aria-label*="Expand"]::after {
    letter-spacing: -2px;
  }

  .nav-buttons-container {
    gap: 6px;
  }

  .search-input-clear-button {
    &::before {
      content: "x_x";
    }

    &::after {
      opacity: 0;
    }
  }
}

body.flexcyon-stylised-pins
  :is(.mod-left-split, .mod-right-split)
  .workspace-tab-header-container-inner {
  .workspace-tab-header-inner-icon
    + div
    + div.workspace-tab-header-status-container {
    inline-size: 0;
  }

  .workspace-tab-header-inner-icon
    + div
    + div.workspace-tab-header-status-container
    .mod-pinned {
    --icon-size: var(--icon-xs);

    color: var(--color-accent-2);
    transform: translate(-3px, -11px);
  }
}

body.flexcyon-stylised-pins.flexcyon-vertical-nav
  :is(.mod-left-split, .mod-right-split)
  .workspace-tab-header-container-inner {
  .workspace-tab-header-inner-icon:has(
    + div + div.workspace-tab-header-status-container > .mod-pinned
  ) {
    transform: translateY(8px);
  }

  .workspace-tab-header-inner-icon
    + div
    + div.workspace-tab-header-status-container
    .mod-pinned {
    --icon-size: var(--icon-xs);

    color: var(--color-accent-2);
    transform: translate(5px, -22px);
  }
}

.mod-root .workspace-tab-header-status-icon {
  color: var(--color-accent-2);
}

body.flexcyon-reverse-tab-header-content .workspace-tab-header-inner {
  flex-direction: row-reverse;
}

body
  :is(.mod-left-split, .mod-right-split)
  .workspace-tab-header-container
  .workspace-tab-header-container-inner {
  gap: 1px;
  padding: unset;
  margin: unset;
}
