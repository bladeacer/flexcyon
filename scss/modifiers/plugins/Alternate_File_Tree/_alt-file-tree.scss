/* Modifications for alternate file tree plugin */

body.theme-light,
body.theme-dark {
  --oz-fta-folder-font-size: calc(var(--font-ui-medium) - 0.1rem);
  --oz-fta-file-font-size: calc(var(--font-ui-medium) - 0.1rem);
}

body.theme-dark {
  --oz-fta-all-panes-active-text-color: #d3d5d3;
  --oz-fta-folder-panes-file-name-color: #d3d5d3;
}

body.theme-light {
  --oz-fta-all-panes-active-text-color: #080808;
  --oz-fta-folder-panes-file-name-color: #080808;
}

body {
  .oz-folder-contents {
    padding: 4px 16px;
    margin-inline-start: 18px !important;
  }

  .oz-folder-contents:not(:has(> .treeview)) {
    border-inline-start: none;
  }

  div.oz-folder-name {
    opacity: var(--dimmed);
  }

  div.oz-folder-element {
    overflow: hidden;
    scrollbar-width: 1px;
  }

  div.oz-folder-name.is-folder-active {
    font-weight: normal;
    opacity: unset;
  }

  div.oz-file-tree-header {
    padding: 8px 5px;
    margin-block-start: 0;
    text-align: var(--flexcyon-top-actions-alignment);
    background-color: var(--color-base-00);
  }

  .oz-folders-action-items,
  .oz-flex-container {
    margin-block-end: 0;
  }

  div.oz-folder-pane {
    position: relative;
    inset-block-start: -4px;
  }

  div.oz-folders-action-items.file-tree-header-fixed {
    background-color: var(--color-base-00);
    border: unset;
    border-radius: unset;

    svg {
      scale: calc(var(--upsize) + 10%);
    }
  }

  .oz-nav-file-tag {
    font-size: calc(var(--oz-fta-folder-font-size) - 0.15rem);
    background-color: transparent;
  }

  .oz-nav-action-button {
    padding: 0 2px;
    margin-inline: 0 8px;
    opacity: var(--dimmed);
  }

  .oz-folders-action-items {
    padding: 0;
    text-align: var(--flexcyon-top-actions-alignment);

    &:hover {
      opacity: unset;
    }

    .oz-nav-action-button {
      margin-inline-end: 8px;
      scale: var(--upsize);
    }
  }
}

body.flexcyon-wrap-long-filenames {
  div.oz-folder-name,
  div.oz-nav-file-title-content {
    overflow: visible;
    text-overflow: clip;
    white-space: normal;
  }
}

body.flexcyon-oz-folder-icons-disabled {
  div.oz-icon-div {
    display: none;
  }
}

body.flexcyon-oz-file-tree-header-disabled {
  div.oz-file-tree-header {
    display: none;
  }
}

body.flexcyon-flex-max-mode,
body.flexcyon-oz-dimmed-file-exts-enabled {
  div.oz-nav-file-title {
    div svg {
      display: none;
    }

    padding: var(--flexcyon-tree-item-verti-padding)
      var(--flexcyon-tree-item-horiz-padding);

    .oz-nav-file-title-content {
      inline-size: unset;
    }

    span.oz-nav-file-tag {
      padding: unset;
      margin: unset;
      font-size: var(--font-ui-small);
      font-weight: unset;
      color: var(--oz-fta-file-pane-file-name-color);
      text-transform: lowercase;
      letter-spacing: unset;
      background-color: unset;
      border: unset;
      opacity: var(--dimmed);

      &::before {
        content: ".";
      }
    }
  }

  div.oz-nav-file-title[data-path$=".md"] {
    div svg {
      display: none;
    }

    span.oz-nav-file-tag {
      display: none;
    }

    div::after {
      font-size: var(--font-ui-small);
      content: ".md";
      opacity: var(--dimmed);
    }
  }
}

body.flexcyon-oz-alternate-folder-count {
  div.oz-folder-line {
    transition: transform hover 0.325ms ease-in-out;

    div.oz-folder-count {
      transform: translateY(1000px);
    }
  }

  div.oz-folder-line:hover {
    max-inline-size: max-content;

    div.oz-folder-count {
      span.oz-nav-file-tag {
        display: inline;
        margin-block-start: 0.5px;
        font-weight: inherit;
        text-align: start;
        text-transform: none;
        transform: translateY(-1000px);

        &::before {
          content: "Count: ";
        }
      }
    }
  }
}

div.oz-nav-file.is-active,
div.oz-nav-file.is-active div.oz-nav-file-title,
div.oz-nav-file.is-active div.oz-nav-file-title-content {
  font-weight: bold;
  background: linear-gradient(
    to right,
    transparent 0%,
    var(--oz-fta-file-pane-active-file-background-color) 10%,
    var(--oz-fta-file-pane-active-file-background-color) 90%,
    transparent 100%
  );
}

.oz-nav-file {
  border: none;
}

.drag-entered,
.oz-folder-element:hover,
.oz-nav-file:hover {
  color: var(--text-normal);
  background-color: var(--nav-item-background-hover);
}
